// -*- javascript -*-

// --------------------------------------------------------------------------------
// buscarPersonaConDNI
// --------------------------------------------------------------------------------

// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
module.exports = {

	conexion: null,  // conexiÃ³n con la bd. Se "inyecta" al cargarse.

	// ----------------------------------------------------------------------------
	// datos: { dni:Texto 
	//         -->
	//            buscarPersonaConDNI() <--
	//         <--
	// {dni:Texto, nombre:Texto: apellidos:Texto}
	// ----------------------------------------------------------------------------
	f: async function ( datos ) {

		var textoSQL = "select * from Persona where dni=$dni";
		var valoresParaSQL = { $dni: datos.dni }

		return new Promise( (resolver, rechazar) => {
			this.conexion.all( textoSQL, valoresParaSQL,
							   ( err, res ) => {
								   ( err ? rechazar(err) : resolver(res) )
							   })
		})
		
	} // ()

} // module.exports

// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
// --------------------------------------------------------------------------------
